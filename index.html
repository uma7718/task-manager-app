<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jkanban@1.3.1/dist/jkanban.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jkanban@1.3.1/dist/jkanban.min.js"></script>
  <style>
    #download {
      display: none;
      width: 100px;
      margin: 15px;
      text-align: center;
      border: 1px solid #aaa;
      cursor: pointer;
    }
  </style>
  <title>jkanban</title>
</head>
<body>
  <form name="wrap">
    <input type="button" name="new" value="新規作成"/>
    <input type="file" name='import'/>
  </form>
  <a id="download" download="sample.json">ダウンロード</a>
  <div id="kanban"></div>
  <script>
    const data = [
      {id:'board-0', title:'タスク'}, //, item:[{id:'item-0', title:'サンプル'}]
      {id:'board-1', title:'進行中'},
      {id:'board-2', title:'完了'}
    ];
    let taskid = 0;

    const kanban = new jKanban({
      element: '#kanban',
      boards: data,
      itemAddOptions: {
        enabled: true,
        content: '追加'
      },

      click: element => kanban.removeElement(element.dataset.eid),

      buttonClick: (element, id) => addTask(id)
    })
    function addTask(id) {
      const task = document.createElement('input');

      kanban.addForm(id, task);
      task.focus();

      task.addEventListener('blur', e => {
        kanban.addElement(id, {id:`item-${taskid++}`, title:e.target.value});
        task.remove();
      })
    }
  </script>
</body>
</html>